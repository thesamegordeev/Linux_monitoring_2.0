#!/bin/bash

function input_checker {

    # Проверка на количество аргументов
    if [[ $# -ne 6 ]]; then
        echo "Некорректное количество аргументов, перезапустите скрипт, передав ему ровно 6 аргументов." >&2
        exit 1
    fi


    # Проверка на существование директории
    if [[ ! -d "$1" ]]; then
        echo "Указан некорректный путь." >&2
        exit 1
    fi


    # Проверка на число (количество папок)
    if ! [[ $2 =~ ^[0-9]+$ ]]; then
        echo "Количество вложенных папок должно быть числом." >&2
        exit 1
    fi
    # Проверка на количество букв в названиях папок
    if [[ ${#3} -gt 7 ]]; then
        echo "Количество букв в 3 аргументе не должно превышать 7." >&2
        exit 1
    fi
    # Проверка на буквы (название папок)
    if ! [[ $3 =~ ^[a-zA-Z]+$ ]]; then
        echo "Названия вложенных папок должны состоять исключительно из букв английского алфавита." >&2
        exit 1
    fi


    # Проверка на число (количество файлов)
    if ! [[ $4 =~ ^[0-9]+$ ]]; then
        echo "Количество файлов должно быть положительным числом." >&2
        exit 1
    fi
    # Проверка на количество файлов, больше нуля
    if [[ $4 -eq 0 ]]; then
        echo "Количество файлов не должно быть равно 0." >&2
        exit 1
    fi
    # Проверка на буквы (название и расширение файлов)
    if ! [[ $5 =~ ^[a-zA-Z]{1,7}[.][a-zA-Z]{1,3}$ ]]; then
        echo "Название и расширение файлов должны состоять исключительно из букв английского алфавита и иметь длину не более 7 для названия, и не более 3 для расширения." >&2
        echo "Например: asd.asd" >&2
        exit 1
    fi

    # Проверка на формат записи размера файлов
    filesize_kb="$6"
    if ! [[ "$filesize_kb" =~ ^[0-9]+kb$ ]]; then
        echo "Размер файлов должен быть числом с приставкой kb. Например: 32kb." >&2
        exit 1
    fi
    # Проверка на размер файлов
    filesize="${filesize_kb%kb}"
    if [[ filesize -le 0 ]] || [[ filesize -gt 100 ]]; then
        echo "Размер файлов должен быть больше 0kb и не более 100kb. Пример: 32kb" >&2
        exit 1
    fi

}