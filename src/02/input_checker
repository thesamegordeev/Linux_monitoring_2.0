#!/bin/bash

function input_checker {

    # Проверка на количество аргументов
    if [[ $# -ne 3 ]]; then
        echo "Некорректное количество аргументов, перезапустите скрипт, передав ему ровно 3 аргумента." >&2
        exit 1
    fi

    # Проверка на количество букв в названиях папок
    if [[ ${#1} -gt 7 ]]; then
        echo "Количество букв в 1 аргументе не должно превышать 7." >&2
        exit 1
    fi
    # Проверка на буквы (название папок)
    if ! [[ $1 =~ ^[a-zA-Z]+$ ]]; then
        echo "Названия вложенных папок должны состоять исключительно из букв английского алфавита." >&2
        exit 1
    fi

    # Проверка на буквы (название и расширение файлов)
    if ! [[ $2 =~ ^[a-zA-Z]{1,7}[.][a-zA-Z]{1,3}$ ]]; then
        echo "Название и расширение файлов должны состоять исключительно из букв английского алфавита и иметь длину не более 7 для названия, и не более 3 для расширения." >&2
        echo "Например: asd.asd" >&2
        exit 1
    fi

    # Проверка на формат записи размера файлов
    filesize_Mb="$3"
    if ! [[ "$filesize_Mb" =~ ^[0-9]+Mb$ ]]; then
        echo "Размер файлов должен быть числом с приставкой Mb. Например: 32Mb." >&2
        exit 1
    fi
    # Проверка на размер файлов
    filesize="${filesize_Mb%Mb}"
    if [[ filesize -le 0 ]] || [[ filesize -gt 100 ]]; then
        echo "Размер файлов должен быть больше 0Mb и не более 100Mb. Пример: 32Mb" >&2
        exit 1
    fi

}